<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Joyce Window ROI – Manual Price + Discount Drawer</title>
<style>
  :root{
    --brand:#0C5AA6; --brand-600:#0a4a88; --accent:#17a34a; --ink:#17212b;
    --muted:#f4f7fb; --line:#e6edf5; --warn:#fff6e5; --warn-line:#ffe0a6;
    --shadow:0 10px 24px rgba(12, 90, 166, .08);
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:#fff}
  .wrap{max-width:880px;margin:auto;padding:18px 18px 120px}
  h1{font-size:1.35rem;margin:0 0 6px}
  .sub{margin:0 0 14px;color:#5b6774}
  .card{background:#fff;border:1px solid var(--line);border-radius:14px;padding:14px;margin:10px 0;box-shadow:var(--shadow)}
  label{display:block;font-size:.95rem;margin:8px 0 6px}
  input[type="number"],input[type="text"],input[type="email"]{
    width:100%;padding:10px;border:1px solid #d6dde6;border-radius:10px;font-size:1rem;background:#fff
  }
  .row{display:flex;gap:12px}.row>*{flex:1}
  @media (max-width:720px){.row{flex-direction:column}}
  .tiers{display:flex;gap:10px;flex-wrap:wrap}
  .pill{display:flex;gap:8px;align-items:center;padding:8px 10px;border:1px solid #dfe5ee;border-radius:999px;background:#f8fbff;cursor:pointer}
  .opt{display:flex;align-items:center;gap:8px;margin:6px 0}
  .kpis{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  @media (max-width:720px){.kpis{grid-template-columns:1fr}}
  .kpi{border:1px solid var(--line);border-radius:12px;padding:12px;background:#fff}
  .kpi .val{font-weight:700;font-size:1.1rem}
  .note{font-size:.9rem;color:#5b6774}
  .tiny{font-size:.8rem;color:#6b7280}
  .btn{background:var(--brand);color:#fff;border:0;border-radius:12px;padding:10px 14px;font-weight:600;cursor:pointer}
  .btn:hover{background:var(--brand-600)}
  .btn-ghost{background:#f8fafc;color:#0b1220;border:1px solid var(--line)}
  .lock{background:var(--warn);border:1px solid var(--warn-line);border-radius:10px;padding:8px;margin-top:6px}
  .blurb{display:flex;justify-content:space-between;align-items:center;gap:12px;background:linear-gradient(90deg, #e9f2ff, #f4fff7);border:1px dashed var(--brand);border-radius:14px;padding:12px}
  .blurb .big{font-size:1.35rem;font-weight:800;color:var(--accent)}
  .slider-wrap{padding:10px;border:1px solid var(--line);border-radius:12px;background:var(--muted)}
  input[type=range]{width:100%}
  .brand{color:var(--brand);font-weight:700}

  /* Drawer */
  .price-tab-handle{position:fixed;left:50%;transform:translateX(-50%);bottom:12px;background:#fff;border:1px solid var(--line);border-radius:999px;padding:10px 14px;font-size:14px;display:flex;align-items:center;gap:10px;cursor:pointer;z-index:1001;box-shadow:var(--shadow)}
  .price-tab-handle .chev{width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:7px solid var(--brand);transition:transform .25s ease;}
  .price-tab-handle[data-state="closed"] .chev{ transform:rotate(180deg); }
  .price-drawer{position:fixed;left:50%;transform:translateX(-50%);bottom:0;width:min(920px, calc(100% - 24px));background:#fff;border:1px solid var(--line);border-bottom:none;border-radius:14px 14px 0 0;box-shadow:var(--shadow);z-index:1000;overflow:clip;transition:max-height .28s ease;max-height:420px;}
  .price-drawer[data-state="closed"]{ max-height:0;border-width:0;box-shadow:none; }
  .drawer-inner{ padding: 16px 16px 18px; }
  .drawer-header{ display:flex;align-items:center;gap:10px;margin-bottom:6px }
  .dot{width:9px;height:9px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 3px rgba(23,163,74,.12)}
  .drawer-title{ font-size:15px;font-weight:700;letter-spacing:.2px }
  .drawer-desc{ color:#5b6774;font-size:13px;margin-bottom:12px }
  .field-row{ display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:12px;align-items:end }
  @media (max-width:700px){ .field-row{grid-template-columns:1fr} }
  .label{ font-size:12px;color:#6b7280 }
  .input{ appearance:none;outline:none;border:1px solid #d6dde6;background:#fff;color:#0b1220;padding:12px;border-radius:12px;font-size:16px;line-height:1.2 }
  .help{ font-size:12px;color:#6b7280;margin-top:6px }
  .error{ color:#b91c1c;font-size:12px;margin-top:6px;display:none }
  .error[aria-live="assertive"]{ display:block }
  details{margin:8px 0}
</style>
</head>
<body>
<div class="wrap">
  <h1>Window ROI Estimator</h1>
  <p class="sub">A fast Joyce estimate using your ZIP and package. We combine <span class="brand">energy savings</span> and <span class="brand">resale recoup</span> over the years you own the home.</p>

  <!-- Inputs -->
  <div class="card">
    <div class="row">
      <div>
        <label for="num">Number of Windows</label>
        <input id="num" type="number" value="10" min="1" step="1" />
      </div>
      <div>
        <label for="zip">ZIP Code</label>
        <input id="zip" type="text" value="44114" maxlength="10" placeholder="e.g., 44114" />
        <div class="note" id="zipNote"></div>
      </div>
    </div>
    <label style="margin-top:8px">Choose Your Package</label>
    <div class="tiers" role="group">
      <label class="pill"><input type="radio" name="tier" value="good" checked> Good <span class="note">($900–$1,100 • J2)</span></label>
      <label class="pill"><input type="radio" name="tier" value="better"> Better <span class="note">($1,250–$1,600 • J31)</span></label>
      <label class="pill"><input type="radio" name="tier" value="best"> Best <span class="note">($1,400–$1,900 • J31)</span></label>
    </div>
    <div id="upgrades">
      <div class="opt"><input type="checkbox" id="paint"><label for="paint">Painted Exterior (+$300)</label></div>
      <div class="opt"><input type="checkbox" id="hardware"><label for="hardware">Hardware Upgrade (+$100)</label></div>
      <div class="opt"><input type="checkbox" id="triple"><label for="triple">Triple-Pane Glass (+$100)</label></div>
    </div>
    <div id="goodLock" class="lock" style="display:none">The <strong>Good</strong> package is as-is: no upgrades.</div>
  </div>

  <!-- Return Blurb -->
  <div class="card">
    <div class="blurb">
      <div>
        <div class="note">Total Return</div>
        <div class="big" id="totalReturn">$—</div>
      </div>
      <div class="note">Net ROI: <strong id="netRoiInline">$—</strong></div>
    </div>
    <div class="slider-wrap" style="margin-top:10px">
      <label for="years"><strong>How long will you live in the home?</strong> <span id="yearsLbl" class="brand">10 years</span></label>
      <input id="years" type="range" min="1" max="20" step="1" value="10" />
    </div>
  </div>

  <!-- Results -->
  <div class="card">
    <div class="kpis">
      <div class="kpi"><div class="val" id="kCost">$—</div><div class="note">Estimated Installed Cost</div><div id="discountedNote" class="tiny" style="display:none"></div></div>
      <div class="kpi"><div class="val" id="kSave">$—</div><div class="note">Energy Savings</div></div>
      <div class="kpi"><div class="val" id="kResale">$—</div><div class="note">Resale Value Recoup</div></div>
      <div class="kpi"><div class="val" id="kROI">$—</div><div class="note">Net ROI</div></div>
    </div>
    <div class="note" id="explain" style="margin-top:10px"></div>
  </div>

  <!-- FAQ -->
  <div class="card">
    <h3>FAQs</h3>
    <details><summary>How accurate is this estimate?</summary><div class="note">This is a ballpark ROI model. Actual costs depend on window size, style, installation, and promotions.</div></details>
    <details><summary>Where does the resale % come from?</summary><div class="note">We assume ~70% recoup based on national Remodeling Cost vs. Value studies.</div></details>
    <details><summary>How is energy savings calculated?</summary><div class="note">We use an average $250 monthly bill, ZIP-based energy inflation, and package efficiency %.</div></details>
    <details><summary>Does a discount change ROI?</summary><div class="note">Yes. Discounts reduce your out-of-pocket cost, so ROI increases, but they do not reduce the inherent value of the windows.</div></details>
    <details><summary>How is ROI calculated?</summary><div class="note">ROI = Energy Savings + Resale Value − Installed Cost + Discount (if entered).</div></details>
  </div>
</div>

<!-- Drawer -->
<button id="priceTabHandle" class="price-tab-handle" type="button" aria-controls="priceDrawer" aria-expanded="false" data-state="closed"><span class="chev"></span><strong>Project Price</strong><span id="priceTabSummary" class="note">$0.00</span></button>
<section id="priceDrawer" class="price-drawer" data-state="closed">
  <div class="drawer-inner">
    <div class="drawer-header"><span class="dot"></span><div class="drawer-title">Manual Project Price</div></div>
    <div class="drawer-desc">Reps can enter price and discount. If set, calculator uses them.</div>
    <form id="priceForm" novalidate>
      <div class="field-row">
        <div><label class="label">Price</label><input id="priceInput" class="input" placeholder="$0.00" /></div>
        <div><label class="label">Discount</label><input id="discountInput" class="input" placeholder="$0.00" /></div>
        <div><label class="label">Note</label><input id="priceNotes" class="input" placeholder="Optional note" /></div>
        <button id="savePriceBtn" class="btn" type="submit">Save</button>
      </div>
      <input type="hidden" id="projectPriceCents" value="0" />
      <input type="hidden" id="discountCents" value="0" />
    </form>
    <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:12px">
      <button id="clearPriceBtn" class="btn-ghost" type="button">Clear</button>
      <button id="closeDrawerBtn" class="btn-ghost" type="button">Close</button>
    </div>
  </div>
</section>

<script>
const $=id=>document.getElementById(id);const money=n=>'$'+Math.round(n).toLocaleString();
const inflByZip1st={'0':4.0,'1':4.0,'2':3.8,'3':3.2,'4':3.2,'5':3.0,'6':3.1,'7':3.3,'8':3.4,'9':3.6};
const tiers={good:{perWindow:1000,eff:18},better:{perWindow:1425,eff:24},best:{perWindow:1650,eff:28}};
const RECOUP=0.70,AVG_BILL=250;
function currentTier(){return document.querySelector('input[name="tier"]:checked').value;}
function inflationFromZip(zip){const d=(zip.match(/\d/)||[])[0];const pct=inflByZip1st[d]??3.2;$('zipNote').textContent=`Regional inflation ${pct.toFixed(1)}%/yr`;return pct/100;}
function parseMoney(raw){if(!raw)return 0;const c=String(raw).replace(/[^0-9.-]/g,'');return Number(c)||0;}
function calc(){
  const n=+($('num').value||1);const yrs=+$('years').value;$('yearsLbl').textContent=yrs+" years";
  const tier=tiers[currentTier()];let cost=tier.perWindow*n;if($('paint').checked)cost+=300;if($('hardware').checked)cost+=100;if($('triple').checked)cost+=100;
  const manual=parseMoney($('projectPriceCents').value)/100;const disc=parseMoney($('discountCents').value)/100;
  const installed=manual>0?manual:cost;const eff=(tier.eff+($('triple').checked?2:0))/100;const infl=inflationFromZip($('zip').value.trim());
  let bill=AVG_BILL,sav=0;for(let y=1;y<=yrs;y++){sav+=bill*eff*12;bill*=(1+infl);}const resale=installed*RECOUP;
  const total=sav+resale;const net=total-installed+disc;
  $('kCost').textContent=money(installed);$('kSave').textContent=money(sav);$('kResale').textContent=money(resale);$('kROI').textContent=(net>=0?'+':'')+money(net);
  $('totalReturn').textContent=money(total+disc);$('netRoiInline').textContent=(net>=0?'+':'')+money(net);
  $('discountedNote').style.display=manual>0||disc>0?'block':'none';if(manual>0||disc>0){$('discountedNote').textContent="Estimated Installed Cost after discounts: "+money(installed-disc);}
}
document.addEventListener('input',e=>{if(['num','zip','paint','hardware','triple','years'].includes(e.target.id))calc();});
document.addEventListener('change',e=>{if(e.target.name==='tier')calc();});
$('priceForm').addEventListener('submit',e=>{e.preventDefault();$('projectPriceCents').value=parseMoney($('priceInput').value)*100;$('discountCents').value=parseMoney($('discountInput').value)*100;calc();});
$('clearPriceBtn').addEventListener('click',()=>{$('priceInput').value='';$('discountInput').value='';$('priceNotes').value='';$('projectPriceCents').value=0;$('discountCents').value=0;calc();});
$('closeDrawerBtn').addEventListener('click',()=>{$('priceDrawer').dataset.state='closed';$('priceTabHandle').dataset.state='closed';$('priceTabHandle').setAttribute('aria-expanded','false');});
calc();
</script>
</body>
</html>
